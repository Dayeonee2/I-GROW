{% load static %}

{% block header %}
<link rel="stylesheet" href="{% static 'css/header.css' %}">

<header>
  <div class="menu-1">
    <div role="button" href="" style="margin-right: 65px; display: flex; align-items: center;" onclick="location.href='/'">
        <img src="{%static 'image/ì•„ì´ê·¸ë¡œìš°ë¡œê³ .png'%} " alt="ì•„ì´ê·¸ë¡œìš° ë¡œê³ " style="width:auto; height:80px; cursor: pointer;">
    </div>
    <button class="toggle-btn" onclick="toggleMenu()" style="top:27px;">â˜°</button>
    <nav role="navigation">
      <ul>
        <li class="opt"><a href="/aboutus/" aria-expanded="false" onclick="toggleSubmenu(event, this)">íšŒì‚¬ì†Œê°œ</a>
          <ul>
            <li class="opt2"><a href="/aboutus/">ì¸ì‚¬ë§</a></li>
            <li class="opt2"><a href="/aboutus/">ì‚¬ì—…ì‹¤ì </a></li>
            <li class="opt2"><a href="/aboutus/">ì¡°ì§êµ¬ì„±</a></li>
            <li class="opt2"><a href="/aboutus/">ì¸ì¦ ë° ë³´ìœ ì‹œì„¤</a></li>
            <li class="opt2"><a href="/aboutus/">ì˜¤ì‹œëŠ”ê¸¸</a></li>
          </ul>
        </li>    
        <li class="opt"><a href="/core/" aria-expanded="false" onclick="toggleSubmenu(event, this)">í•µì‹¬ì‚¬ì—…</a>
          <ul>
            <li class="opt2"><a href="/core/">ëŒ€í•™ ì¤‘ì¥ê¸°</a></li>
            <li class="opt2"><a href="/core/">êµìœ¡ê³¼ì •</a></li>
            <li class="opt2"><a href="/core/">ì¡°ì§ê°œí¸</a></li>
            <li class="opt2"><a href="/core/">ë§Œì¡±ë„ì¡°ì‚¬</a></li>
          </ul>
        </li>
        <li class="opt"><a href="/core/" aria-expanded="false" onclick="toggleSubmenu(event, this)">êµìœ¡ì„¼í„°</a></li>
        <li class="opt"><a href="/core/" aria-expanded="false" onclick="toggleSubmenu(event, this)">ì¸ì¬ì±„ìš©</a>
          <ul>
            <li class="opt2"><a href="/core/">ì¸ì¬ìƒ</a></li>
            <li class="opt2"><a href="/core/">ë³µë¦¬í›„ìƒ</a></li>
            <li class="opt2"><a href="/core/">ê¸‰ì—¬ì²´ê³„</a></li>
          </ul>
        </li>
        <li class="opt"><a href="/core/" aria-expanded="false" onclick="toggleSubmenu(event, this)">Contact</a>
          <ul class="rightside">
            <li class="opt2"><a href="/core/">ì‚¬ì—…ë¬¸ì˜</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>

<script>
// ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€ í•¨ìˆ˜
function toggleMenu() {
  const nav = document.querySelector("nav");
  nav.classList.toggle("active");
}

// ì„œë¸Œë©”ë‰´ í† ê¸€ (ëª¨ë°”ì¼ ì „ìš©)
function toggleSubmenu(event, element) {
  event.preventDefault();
  event.stopPropagation();

  let parentLi = element.parentElement;
  let submenu = parentLi.querySelector("ul");
  let isOpen = parentLi.classList.contains("open");

  // ğŸ”¹ 768px ì´í•˜(ëª¨ë°”ì¼)ì—ì„œë§Œ ì‹¤í–‰
  if (window.innerWidth <= 768) {
    document.querySelectorAll(".opt").forEach((opt) => {
      opt.classList.remove("open");
      opt.querySelector("a").setAttribute("aria-expanded", "false");
    });

    if (!isOpen) {
      parentLi.classList.add("open");
      element.setAttribute("aria-expanded", "true");

      // ì„œë¸Œë©”ë‰´ ì—´ê¸°
      submenu.style.maxHeight = submenu.scrollHeight + "px";
      submenu.style.opacity = "1";
    } else {
      submenu.style.maxHeight = "0";
      submenu.style.opacity = "0";
    }
  }
}

// ğŸ”¹ PCì—ì„œë§Œ hover íš¨ê³¼ ì ìš© (ìŠ¤í¬ë¦½íŠ¸ê°€ ëª¨ë°”ì¼ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ê°œì„ )
function enableHoverOnPC() {
  if (window.innerWidth > 768) {
    document.querySelectorAll(".opt > ul").forEach((submenu) => {
      submenu.style.maxHeight = "0";
      submenu.style.opacity = "0";
      submenu.style.transition = "max-height 0.5s ease-out, opacity 0.5s ease-out";
    });

    const header = document.querySelector("header");
    header.addEventListener("mouseenter", () => {
      document.querySelectorAll(".opt > ul").forEach((submenu) => {
        submenu.style.maxHeight = submenu.scrollHeight + "px";
        submenu.style.opacity = "1";
      });
    });

    header.addEventListener("mouseleave", () => {
      document.querySelectorAll(".opt > ul").forEach((submenu) => {
        submenu.style.maxHeight = "0";
        submenu.style.opacity = "0";
      });
    });
  }
}

// ğŸ”¹ í˜ì´ì§€ ë¡œë“œ ì‹œ ë° í™”ë©´ í¬ê¸° ë³€ê²½ ì‹œ PC/ëª¨ë°”ì¼ í™˜ê²½ ê°ì§€
function checkScreenSize() {
  if (window.innerWidth > 768) {
    enableHoverOnPC(); // PC ì „ìš© hover ê¸°ëŠ¥ í™œì„±í™”
  } else {
    document.querySelectorAll(".opt > ul").forEach((submenu) => {
      submenu.style.maxHeight = "0"; // ëª¨ë°”ì¼ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€
      submenu.style.opacity = "0";
    });
  }
}

// ğŸ”¹ ì´ˆê¸° ì‹¤í–‰ ë° ì°½ í¬ê¸° ë³€ê²½ ì‹œ ì ìš©
window.addEventListener("load", checkScreenSize);
window.addEventListener("resize", checkScreenSize);
</script>


{% endblock %}