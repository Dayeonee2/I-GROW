{% load static %}

{% block header %}
<link rel="stylesheet" href="{% static 'css/header.css' %}">

<header>
  <div class="menu-1">
    <div role="button" href="" style="margin-right: 65px; display: flex; align-items: center;" onclick="location.href='/'">
        <img src="{%static 'image/ì•„ì´ê·¸ë¡œìš°ë¡œê³ .png'%} " alt="ì•„ì´ê·¸ë¡œìš° ë¡œê³ " style="width:auto; height:80px; cursor: pointer;">
    </div>
    <button class="toggle-btn" onclick="toggleMenu()" style="top:27px;">â˜°</button>
    <nav role="navigation">
      <ul>
        <li class="opt"><a href="{% url 'aboutus:introduce' %}" aria-expanded="false" onclick="toggleSubmenu(event, this)">íšŒì‚¬ì†Œê°œ</a>
          <ul>
            <li class="opt2"><a href="{% url 'aboutus:introduce' %}">ì¸ì‚¬ë§</a></li>
            <li class="opt2"><a href="{% url 'aboutus:business' %}">ì‚¬ì—…ì‹¤ì </a></li>
            <li class="opt2"><a href="{% url 'aboutus:organization' %}">ì¡°ì§êµ¬ì„±</a></li>
            <li class="opt2"><a href="{% url 'aboutus:certified' %}">ì¸ì¦ ë° ë³´ìœ ì‹œì„¤</a></li>
            <li class="opt2"><a href="{% url 'aboutus:direction' %}">ì˜¤ì‹œëŠ”ê¸¸</a></li>
          </ul>
        </li>    
        <li class="opt"><a href="{% url 'core:university' %}" aria-expanded="false" onclick="toggleSubmenu(event, this)">í•µì‹¬ì‚¬ì—…</a>
          <ul>
            <li class="opt2"><a href="{% url 'core:university' %}">ëŒ€í•™ ì¤‘ì¥ê¸°</a></li>
            <li class="opt2"><a href="{% url 'core:curriculum' %}">êµìœ¡ê³¼ì •</a></li>
            <li class="opt2"><a href="{% url 'core:reorganization' %}">ì¡°ì§ê°œí¸</a></li>
            <li class="opt2"><a href="{% url 'core:survey' %}">ë§Œì¡±ë„ì¡°ì‚¬</a></li>
          </ul>
        </li>
        <li class="opt"><a href="https://www.howsolkorea.com/main/index.jsp" aria-expanded="false" target="_blank">êµìœ¡ì„¼í„°</a></li>
        <li class="opt"><a href="{% url 'recuit:idealcandidate' %}" aria-expanded="false" onclick="toggleSubmenu(event, this)">ì¸ì¬ì±„ìš©</a>
          <ul>
            <li class="opt2"><a href="{% url 'recuit:idealcandidate' %}">ì¸ì¬ìƒ</a></li>
            <li class="opt2"><a href="{% url 'recuit:benefits' %}">ë³µë¦¬í›„ìƒ</a></li>
            <li class="opt2"><a href="{% url 'recuit:salary' %}">ê¸‰ì—¬ì²´ê³„</a></li>
          </ul>
        </li>
        <li class="opt"><a href="/contact/" aria-expanded="false" onclick="toggleSubmenu(event, this)">Contact</a>
          <ul class="rightside">
            <li class="opt2"><a href="/contact/">ì‚¬ì—…ë¬¸ì˜</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>

<script>
// ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€ í•¨ìˆ˜
function toggleMenu() {
  const nav = document.querySelector("nav");
  nav.classList.toggle("active");
}

// ì„œë¸Œë©”ë‰´ í† ê¸€ (ëª¨ë°”ì¼ ì „ìš©)
function toggleSubmenu(event, element) {
  event.preventDefault();
  event.stopPropagation();

  let parentLi = element.parentElement;
  let submenu = parentLi.querySelector("ul");
  let isOpen = parentLi.classList.contains("open");

  // ğŸ”¹ 1024px ì´í•˜(ëª¨ë°”ì¼)ì—ì„œë§Œ ì‹¤í–‰
  if (window.innerWidth <= 1024) {
    document.querySelectorAll(".opt").forEach((opt) => {
      opt.classList.remove("open");
      opt.querySelector("a").setAttribute("aria-expanded", "false");
    });

    if (!isOpen) {
      parentLi.classList.add("open");
      element.setAttribute("aria-expanded", "true");

      // ì„œë¸Œë©”ë‰´ ì—´ê¸°
      submenu.style.maxHeight = submenu.scrollHeight + "px";
      submenu.style.opacity = "1";
    } else {
      submenu.style.maxHeight = "0";
      submenu.style.opacity = "0";
    }
  }
}

// ğŸ”¹ PCì—ì„œë§Œ hover íš¨ê³¼ ì ìš© (ëª¨ë°”ì¼ì—ì„œëŠ” ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ ì¡°ì •)
function enableHoverOnPC() {
  if (window.innerWidth > 1024) {
    document.querySelectorAll(".opt > ul").forEach((submenu) => {
      submenu.style.maxHeight = "0";
      submenu.style.opacity = "0";
      submenu.style.transition = "max-height 0.5s ease-out, opacity 0.5s ease-out";
    });

    const header = document.querySelector("header");
    header.addEventListener("mouseenter", () => {
      if (window.innerWidth > 1024) { // ğŸ”¹ PC í™˜ê²½ì—ì„œë§Œ ì‹¤í–‰
        document.querySelectorAll(".opt > ul").forEach((submenu) => {
          submenu.style.maxHeight = submenu.scrollHeight + "px";
          submenu.style.opacity = "1";
        });
      }
    });

    header.addEventListener("mouseleave", () => {
      if (window.innerWidth > 1024) { // ğŸ”¹ PC í™˜ê²½ì—ì„œë§Œ ì‹¤í–‰
        document.querySelectorAll(".opt > ul").forEach((submenu) => {
          submenu.style.maxHeight = "0";
          submenu.style.opacity = "0";
        });
      }
    });
  }
}

// ğŸ”¹ ëª¨ë°”ì¼ì—ì„œëŠ” hoverê°€ ì•„ë‹Œ í´ë¦­ìœ¼ë¡œë§Œ ë©”ë‰´ê°€ ì—´ë¦¬ë„ë¡ ì²˜ë¦¬
function checkScreenSize() {
  if (window.innerWidth > 1024) {
    enableHoverOnPC(); // PC ì „ìš© hover ê¸°ëŠ¥ í™œì„±í™”
  } else {
    // ğŸ”¹ ëª¨ë°”ì¼ì—ì„œëŠ” ë©”ë‰´ë¥¼ hoverë¡œ ì—´ì§€ ì•Šë„ë¡ ì„¤ì •
    document.querySelectorAll(".opt > ul").forEach((submenu) => {
      submenu.style.maxHeight = "0"; 
      submenu.style.opacity = "0";
    });

    // ê¸°ì¡´ hover ì´ë²¤íŠ¸ ì œê±° (PC í™˜ê²½ì—ì„œë§Œ ë™ì‘í•˜ë„ë¡ í•˜ê¸° ìœ„í•´)
    document.querySelector("header").removeEventListener("mouseenter", enableHoverOnPC);
    document.querySelector("header").removeEventListener("mouseleave", enableHoverOnPC);
  }
}

// ğŸ”¹ ì´ˆê¸° ì‹¤í–‰ ë° ì°½ í¬ê¸° ë³€ê²½ ì‹œ ì ìš©
window.addEventListener("load", checkScreenSize);
window.addEventListener("resize", checkScreenSize);
</script>


{% endblock %}